{"version":3,"sources":["Components/Particles/Octree/Box.js","Components/Particles/Octree/Octree.js","Components/Particles/Components/Connections.js","Components/Particles/Octree/Particle.js","Components/Particles/Components/font.blob","Components/Particles/Components/useParticles.js","Components/Particles/Octree/Sphere.js","Components/Particles/Particles.js","Components/ScrollDown/ScrollDown.js","Components/Sky/Stars.js","Components/Sky/Sky.js","Components/Content/Portal/Ring.js","Components/Content/Portal/MagicBox.js","Components/Content/Portal/Image.js","Components/Content/Portal/Link.js","Components/Content/Portal/Text.js","Components/Content/Portal/GithubLogo.js","Components/Content/Portal/Portal.js","Components/Content/Portal/data/car2d.png","Components/Content/Portal/data/newtonsCradle.png","Components/Content/Portal/data/newsFeeds.JPG","Components/Content/Portal/data/morphing.png","Components/Content/Portal/data/weather.JPG","Components/Content/Portal/data/tesseract.png","Components/Content/Portal/data/sorting.jpg","Components/Content/Portal/data/attractors.JPG","Components/Content/Portal/data/fractal.JPG","Components/Content/Portal/data/Diffusion.JPG","Components/Content/Portal/data/useContentData.js","Components/Content/Portal/data/githubLogo.png","Components/Content/Content.js","Components/Effects/CustomBloom.js","Components/Effects/Effects.js","Components/NoEffects/NoEffects.js","Components/Smoke/Smoke-Element.png","Components/Smoke/Smoke.js","Rig.js","Components/Container/useInteractions.js","Components/Container/Browser.js","Components/Container/Mobile.js","Components/Container/Container.js","App.js","index.js"],"names":["Box","x","y","z","w","h","d","this","left","right","top","bottom","front","back","particle","position","range","xIntersects","yIntersects","zIntersects","Octree","boundary","sectionsLength","subSections","capacity","points","point","contains","length","push","subdivide","insert","i","newTree","Math","floor","found","intersects","forEach","section","query","octree","memo","particles","geometryRef","useRef","positionRef","colorRef","linePositions","Float32Array","lineColors","useEffect","current","needsUpdate","useFrame","clear","vertexPos","particleA","set","otherParticles","numConnections","min","j","particleB","setDrawRange","frustumCulled","ref","attach","drawRange","start","count","attachObject","args","usage","THREE","vertexColors","blending","dim","Particle","random","velocity","clampScalar","acceleration","jerk","textBoundaries","targetPos","startPos","neighbours","r","speedLimit","add","boundaryCheck","progress","lerpVectors","textSize","isBrowser","generateText","font","geometry","dummyTarget","vA","vB","vC","ray","computeBoundingBox","bbox","boundingBox","dir","normalize","halfwayX","max","halfwayY","halfwayZ","counter","v","randFloat","isInside","pos","attributes","faces","fromBufferAttribute","intersectTriangle","fillWithPoints","size","height","curveSegments","cbrt","window","innerWidth","Sphere","rSquared","distanceToSquared","textRange","Particles","stage","setStage","mouseRange","useState","showText","setShowText","useLoader","fontFile","useMemo","map","newParticle","Object","values","useParticles","update","easing","d3","interpolate","Text","fontSize","color","anchorX","anchorY","ScrollDown","className","StarfieldMaterial","uniforms","time","value","fade","vertexShader","fragmentShader","ShaderMaterial","genStar","Vector3","setFromSpherical","Spherical","acos","PI","Stars","React","radius","depth","saturation","factor","material","positions","colors","sizes","Array","from","Color","increment","toArray","setHSL","g","b","state","clock","getElapsedTime","starfieldMaterial","renderOrder","dispose","undefined","object","AdditiveBlending","Sky","Ring","dimensions","w2","h2","vertices","norm","numVertices","normals","posNdx","nrmNdx","vertex","setIndex","scale","transparent","MagicBox","debug","w1","backXOffset","h1","colorWrite","Image","image","Link","setHovered","swipingInProgress","onPointerOver","onPointerOut","onPointerUp","open","url","opacity","TextComponent","outlineColor","outlineWidth","outlineBlur","text","GithubLogo","github","onPointerDown","e","stopPropagation","logo","Portal","xOffset","yOffset","zOffset","loader","TextureLoader","textureFiles","githubLogo","newtonsCradle","car2d","newsFeeds","morphing","weather","attractors","sorting","fractal","tesseract","Diffusion","textures","key","load","texture","Content","scroll","hovered","contentData","diff","document","body","style","cursor","data","index","UnrealBloomPass","resolution","strength","threshold","Vector2","clearColor","pars","minFilter","LinearFilter","magFilter","format","RGBAFormat","renderTargetsHorizontal","renderTargetsVertical","nMips","resx","round","resy","renderTargetBright","WebGLRenderTarget","name","generateMipmaps","renderTargetHorizonal","renderTargetVertical","LuminosityHighPassShader","console","error","highPassShader","highPassUniforms","UniformsUtils","clone","materialHighPassFilter","defines","separableBlurMaterials","kernelSizeArray","getSeperableBlurMaterial","compositeMaterial","getCompositeMaterial","bloomTintColors","CopyShader","copyShader","copyUniforms","materialCopy","depthTest","depthWrite","enabled","needsSwap","_oldClearColor","oldClearAlpha","basic","MeshBasicMaterial","fsQuad","FullScreenQuad","width","setSize","renderer","writeBuffer","readBuffer","deltaTime","maskActive","getClearColor","getClearAlpha","oldAutoClear","autoClear","setClearColor","buffers","stencil","setTest","renderToScreen","setRenderTarget","render","inputRenderTarget","BlurDirectionX","BlurDirectionY","kernelRadius","KERNEL_RADIUS","SIGMA","colorTexture","texSize","direction","NUM_MIPS","blurTexture1","blurTexture2","blurTexture3","blurTexture4","blurTexture5","dirtTexture","bloomStrength","bloomFactors","bloomRadius","Pass","Effects","children","composer","useThree","gl","camera","scene","setScene","bloom","attachArray","NoEffects","clearDepth","extend","EffectComposer","ShaderPass","RenderPass","scratchObject3D","Object3D","randn_bm","u","num","sqrt","log","cos","Smoke","meshRef","smokeTexture","useTexture","smokeImage","Vector4","rotation","updateMatrix","setMatrixAt","matrix","instanceMatrix","intensity","distance","decay","Rig","mouse","lookAt","clamp","maxY","Browser","ignore","onMouseMove","useCallback","clientX","clientY","innerHeight","onScroll","deltaY","prevStage","Infinity","setTimeout","useMouseInteraction","onClick","onWheel","onPointerMove","Mobile","prevScroll","useTouchInteraction","onSwipeStart","onSwipeStop","onSwiping","handlers","useSwipeable","onSwiped","delta","preventDefaultTouchmoveEvent","trackTouch","trackMouse","rotationAngle","Container","App","fov","far","fallback","Stats","Loader","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8b777a39.chunk.js","sourcesContent":["export default class Box {\r\n  constructor(x, y, z, w, h, d) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.z = z;\r\n    this.w = w;\r\n    this.h = h;\r\n    this.d = d;\r\n    this.left = x - w;\r\n    this.right = x + w;\r\n    this.top = y + h;\r\n    this.bottom = y - h;\r\n    this.front = z + d;\r\n    this.back = z - d;\r\n  }\r\n  contains(particle) {\r\n    return (\r\n      particle.position.x >= this.left &&\r\n      particle.position.x < this.right &&\r\n      particle.position.y >= this.bottom &&\r\n      particle.position.y < this.top &&\r\n      particle.position.z >= this.back &&\r\n      particle.position.z < this.front\r\n    );\r\n  }\r\n\r\n  xIntersects(range) {\r\n    return !(range.right < this.left || range.left > this.right);\r\n  }\r\n  yIntersects(range) {\r\n    return !(range.top < this.bottom || range.bottom > this.top);\r\n  }\r\n  zIntersects(range) {\r\n    return !(range.front < this.back || range.back > this.front);\r\n  }\r\n  intersects(range) {\r\n    return (\r\n      this.xIntersects(range) &&\r\n      this.yIntersects(range) &&\r\n      this.zIntersects(range)\r\n    );\r\n  }\r\n}\r\n","import Box from \"./Box\";\r\n\r\nexport default class Octree {\r\n  constructor(boundary = new Box(0, 0, 0, 400, 400, 400)) {\r\n    this.sectionsLength = 8;\r\n    this.subSections = [];\r\n    this.boundary = boundary;\r\n    this.capacity = 4;\r\n    this.points = [];\r\n  }\r\n  clear() {\r\n    this.subSections = [];\r\n    this.points = [];\r\n  }\r\n  insert(point) {\r\n    if (!this.boundary.contains(point)) return false;\r\n    if (this.points.length < this.capacity) {\r\n      this.points.push(point);\r\n      return true;\r\n    }\r\n    if (!this.subSections.length) {\r\n      this.subdivide();\r\n    }\r\n\r\n    for (let section of this.subSections) {\r\n      const success = section.insert(point);\r\n      if (success) return true;\r\n    }\r\n  }\r\n\r\n  subdivide() {\r\n    let { x, y, z, w, h, d } = this.boundary;\r\n    x -= w / 2;\r\n    y -= h / 2;\r\n    z -= d / 2;\r\n    for (let i = 0; i < this.sectionsLength; i++) {\r\n      const newBox = new Box(\r\n        x + (i % 2) * w,\r\n        y + Math.floor((i % 4) / 2) * h,\r\n        z + Math.floor(i / 4) * d,\r\n        w / 2,\r\n        h / 2,\r\n        d / 2\r\n      );\r\n      const newTree = new Octree(newBox);\r\n      this.subSections.push(newTree);\r\n    }\r\n  }\r\n\r\n  query(range, found = []) {\r\n    if (!this.boundary.intersects(range)) return found;\r\n    this.points.forEach((point) => {\r\n      if (range.contains(point)) found.push(point);\r\n    });\r\n\r\n    this.subSections.forEach((section) => {\r\n      section.query(range, found);\r\n    });\r\n    return found;\r\n  }\r\n}\r\n","import * as THREE from \"three\";\r\nimport { useEffect, useRef, memo } from \"react\";\r\nimport { useFrame } from \"@react-three/fiber\";\r\nimport Octree from \"../Octree/Octree\";\r\n\r\nconst octree = new Octree();\r\nconst maxConnections = 30;\r\nexport default memo(function Connections({ particles, range }) {\r\n  const geometryRef = useRef();\r\n  const positionRef = useRef();\r\n  const colorRef = useRef();\r\n  const linePositions = useRef(new Float32Array(1000 * maxConnections * 3));\r\n  const lineColors = useRef(new Float32Array(1000 * maxConnections * 3));\r\n\r\n  useEffect(() => {\r\n    const r = 0;\r\n    const g = 0.025;\r\n    const b = 0.036;\r\n    for (let i = 0; i < lineColors.current.length; i += 6) {\r\n      lineColors.current[i] = r;\r\n      lineColors.current[i + 1] = g;\r\n      lineColors.current[i + 2] = b;\r\n\r\n      lineColors.current[i + 3] = 0;\r\n      lineColors.current[i + 4] = g;\r\n      lineColors.current[i + 5] = b;\r\n    }\r\n    colorRef.current.needsUpdate = true;\r\n  }, []);\r\n\r\n  useFrame(() => {\r\n    if (!geometryRef.current) return;\r\n\r\n    octree.clear();\r\n    particles.forEach((particle) => octree.insert(particle));\r\n\r\n    let vertexPos = 0;\r\n    for (let i = 0; i < particles.length; ++i) {\r\n      const particleA = particles[i];\r\n      range.set(particleA);\r\n\r\n      const otherParticles = octree.query(range);\r\n      const numConnections = Math.min(otherParticles.length, maxConnections);\r\n      for (let j = 0; j < numConnections; j++) {\r\n        const particleB = otherParticles[j];\r\n\r\n        linePositions.current[vertexPos++] = particleA.position.x;\r\n        linePositions.current[vertexPos++] = particleA.position.y;\r\n        linePositions.current[vertexPos++] = particleA.position.z;\r\n\r\n        linePositions.current[vertexPos++] = particleB.position.x;\r\n        linePositions.current[vertexPos++] = particleB.position.y;\r\n        linePositions.current[vertexPos++] = particleB.position.z;\r\n      }\r\n    }\r\n    geometryRef.current.setDrawRange(0, vertexPos / 3);\r\n    positionRef.current.needsUpdate = true;\r\n  });\r\n\r\n  return (\r\n    <lineSegments frustumCulled={false}>\r\n      <bufferGeometry\r\n        ref={geometryRef}\r\n        attach=\"geometry\"\r\n        drawRange={{ start: 0, count: 0 }}\r\n      >\r\n        <bufferAttribute\r\n          ref={positionRef}\r\n          attachObject={[\"attributes\", \"position\"]}\r\n          args={[linePositions.current, 3]}\r\n          usage={THREE.DynamicDrawUsage}\r\n        />\r\n        <bufferAttribute\r\n          ref={colorRef}\r\n          attachObject={[\"attributes\", \"color\"]}\r\n          args={[lineColors.current, 3]}\r\n          usage={THREE.DynamicDrawUsage}\r\n        />\r\n      </bufferGeometry>\r\n      <lineBasicMaterial\r\n        attach=\"material\"\r\n        vertexColors={true}\r\n        blending={THREE.AdditiveBlending}\r\n      />\r\n    </lineSegments>\r\n  );\r\n});\r\n","import * as THREE from \"three\";\r\n\r\nconst dim = 400;\r\n\r\nexport default class Particle {\r\n  constructor() {\r\n    const x = dim - Math.random() * 2 * dim;\r\n    const y = dim - Math.random() * 2 * dim;\r\n    const z = dim - Math.random() * 2 * dim;\r\n    this.position = new THREE.Vector3(x, y, z);\r\n    this.velocity = new THREE.Vector3(\r\n      (Math.random() - 0.5) / 3,\r\n      (Math.random() - 0.5) / 3,\r\n      (Math.random() - 0.5) / 3\r\n    );\r\n    this.velocity.clampScalar(0.01, 0.02);\r\n    this.acceleration = new THREE.Vector3(0, 0, 0);\r\n    this.jerk = new THREE.Vector3(0, 0, 0);\r\n    this.textBoundaries = false;\r\n    this.targetPos = new THREE.Vector3(x, y, z);\r\n    this.startPos = new THREE.Vector3(x, y, z);\r\n    this.neighbours = [];\r\n    this.r = 100;\r\n    this.speedLimit = 0.1;\r\n  }\r\n\r\n  update() {\r\n    this.jerk.set(\r\n      (Math.random() - 0.5) / 200,\r\n      (Math.random() - 0.5) / 200,\r\n      (Math.random() - 0.5) / 200\r\n    );\r\n    this.acceleration.add(this.jerk);\r\n    this.acceleration.clampScalar(-0.01, 0.01);\r\n    this.velocity.add(this.acceleration);\r\n    this.velocity.clampScalar(-this.speedLimit, this.speedLimit);\r\n    this.position.add(this.velocity);\r\n    this.boundaryCheck();\r\n  }\r\n\r\n  boundaryCheck() {\r\n    if (!this.textBoundaries) {\r\n      if (this.position.x < -dim || this.position.x > dim) {\r\n        this.velocity.x *= -1;\r\n        this.acceleration.x *= -1;\r\n      }\r\n      if (this.position.y < -dim || this.position.y > dim) {\r\n        this.velocity.y *= -1;\r\n        this.acceleration.y *= -1;\r\n      }\r\n      if (this.position.z < -dim || this.position.z > dim) {\r\n        this.velocity.z *= -1;\r\n        this.acceleration.z *= -1;\r\n      }\r\n      return;\r\n    }\r\n    if (\r\n      this.position.x < this.targetPos.x - 1 ||\r\n      this.position.x > this.targetPos.x + 1\r\n    ) {\r\n      this.velocity.x *= -1;\r\n      this.acceleration.x *= -1;\r\n    }\r\n    if (\r\n      this.position.y < this.targetPos.y - 1 ||\r\n      this.position.y > this.targetPos.y + 1\r\n    ) {\r\n      this.velocity.y *= -1;\r\n      this.acceleration.y *= -1;\r\n    }\r\n    if (\r\n      this.position.z < this.targetPos.z - 1 ||\r\n      this.position.z > this.targetPos.z + 1\r\n    ) {\r\n      this.velocity.z *= -1;\r\n      this.acceleration.z *= -1;\r\n    }\r\n  }\r\n\r\n  interpolate(progress) {\r\n    this.position.lerpVectors(this.startPos, this.targetPos, progress);\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/font.ef4d68f3.blob\";","import { useLoader } from \"@react-three/fiber\";\r\nimport { isBrowser } from \"react-device-detect\";\r\nimport { useMemo } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport Particle from \"../Octree/Particle\";\r\nimport fontFile from \"./font.blob\";\r\n\r\nconst textSize = isBrowser ? 40 : 20;\r\n\r\nfunction fillWithPoints(geometry, count) {\r\n  const dummyTarget = new THREE.Vector3();\r\n  const vA = new THREE.Vector3();\r\n  const vB = new THREE.Vector3();\r\n  const vC = new THREE.Vector3();\r\n  const ray = new THREE.Ray();\r\n  geometry.computeBoundingBox();\r\n  let bbox = geometry.boundingBox;\r\n\r\n  const points = [];\r\n\r\n  const dir = new THREE.Vector3(1, 1, 1).normalize();\r\n\r\n  const halfwayX = (bbox.max.x + bbox.min.x) / 2;\r\n  const halfwayY = (bbox.max.y + bbox.min.y) / 2;\r\n  const halfwayZ = (bbox.max.z + bbox.min.z) / 2;\r\n  let counter = 0;\r\n  while (counter < count) {\r\n    let v = new THREE.Vector3(\r\n      THREE.Math.randFloat(bbox.min.x, bbox.max.x),\r\n      THREE.Math.randFloat(bbox.min.y, bbox.max.y),\r\n      THREE.Math.randFloat(bbox.min.z, bbox.max.z)\r\n    );\r\n    if (isInside(v)) {\r\n      v.x -= halfwayX;\r\n      v.y -= halfwayY;\r\n      v.z -= halfwayZ - 350;\r\n      points.push(v);\r\n      counter++;\r\n    }\r\n  }\r\n\r\n  function isInside(v) {\r\n    ray.set(v, dir);\r\n    let counter = 0;\r\n\r\n    const pos = geometry.attributes.position;\r\n    const faces = pos.count / 3;\r\n\r\n    for (let i = 0; i < faces; i++) {\r\n      vA.fromBufferAttribute(pos, i * 3 + 0);\r\n      vB.fromBufferAttribute(pos, i * 3 + 1);\r\n      vC.fromBufferAttribute(pos, i * 3 + 2);\r\n      if (ray.intersectTriangle(vA, vB, vC, false, dummyTarget)) counter++;\r\n    }\r\n\r\n    return counter % 2 === 1;\r\n  }\r\n  return points;\r\n}\r\n\r\nfunction generateText(font) {\r\n  if (!font) return;\r\n  const geometry = new THREE.TextBufferGeometry(\"welcome\", {\r\n    font,\r\n    size: textSize,\r\n    height: 10,\r\n    curveSegments: 3,\r\n  });\r\n  const points = fillWithPoints(geometry, Math.cbrt(window.innerWidth) * 80);\r\n  return points;\r\n}\r\nexport default function useTextPoints() {\r\n  const font = useLoader(THREE.FontLoader, fontFile);\r\n\r\n  const particles = useMemo(() => {\r\n    const textPoints = generateText(font);\r\n    return textPoints.map((point) => {\r\n      const newParticle = new Particle();\r\n      newParticle.targetPos.set(...Object.values(point));\r\n      return newParticle;\r\n    });\r\n  }, [font]);\r\n\r\n  return particles;\r\n}\r\n","import * as THREE from \"three\";\r\nexport default class Sphere {\r\n  constructor(x = 0, y = 0, z = 0, r = 150) {\r\n    this.position = new THREE.Vector3(x, y, z);\r\n    this.r = r;\r\n    this.rSquared = r ** 2;\r\n  }\r\n  set(particle) {\r\n    this.position = particle.position;\r\n    const { x, y, z } = this.position;\r\n    this.left = x - this.r;\r\n    this.right = x + this.r;\r\n    this.top = y + this.r;\r\n    this.bottom = y - this.r;\r\n    this.front = z + this.r;\r\n    this.back = z - this.r;\r\n  }\r\n  contains(particle) {\r\n    if (this.position === particle.position) return false;\r\n    const distSquared = this.position.distanceToSquared(particle.position);\r\n    return distSquared <= this.rSquared;\r\n  }\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { isBrowser } from \"react-device-detect\";\r\nimport { useFrame } from \"@react-three/fiber\";\r\nimport { Text } from \"@react-three/drei\";\r\n\r\nimport Connections from \"./Components/Connections\";\r\nimport useParticles from \"./Components/useParticles\";\r\nimport Sphere from \"./Octree/Sphere\";\r\nimport * as d3 from \"d3-ease\";\r\nconst range = new Sphere();\r\n\r\nconst textRange = isBrowser ? 10 : 5;\r\nexport default function Particles({ stage, setStage, mouseRange, progress }) {\r\n  const [showText, setShowText] = useState(true);\r\n  const particles = useParticles();\r\n\r\n  useEffect(() => {\r\n    if (stage === 0) return;\r\n    progress.current = 0;\r\n    particles.forEach((particle) => {\r\n      particle.startPos.set(...Object.values(particle.position));\r\n    });\r\n\r\n    if (stage === 2) {\r\n      particles.forEach((particle) => {\r\n        particle.targetPos.set(\r\n          600 - Math.random() * 1200,\r\n          400,\r\n          -Math.random() * 400\r\n        );\r\n      });\r\n      return;\r\n    }\r\n  }, [stage, particles, progress]);\r\n\r\n  useFrame(() => {\r\n    if (progress.current > 1) {\r\n      particles.forEach((particle) => particle.update());\r\n      return;\r\n    }\r\n    progress.current += 0.01;\r\n\r\n    //STAGE 1: FORM TEXT\r\n    if (stage === 1) {\r\n      mouseRange.current += 0.1;\r\n      const easing = d3.easeSinOut(progress.current);\r\n      particles.forEach((particle) => particle.interpolate(easing));\r\n      range.r = (1 - easing) * 150 + easing * textRange;\r\n      range.rSquared = range.r * range.r;\r\n      if (progress.current > 1) {\r\n        particles.forEach((particle) => {\r\n          particle.textBoundaries = true;\r\n          particle.speedLimit = 0.03;\r\n        });\r\n      }\r\n      return;\r\n    }\r\n    //STAGE 2: SCATTER\r\n    if (stage === 2) {\r\n      mouseRange.current -= 0.1;\r\n      const easing = d3.easeCubicIn(progress.current);\r\n      particles.forEach((particle) => particle.interpolate(easing));\r\n      range.r = (1 - easing) * textRange + easing * 50;\r\n      range.rSquared = range.r * range.r;\r\n      if (progress.current > 0.55) setShowText(false);\r\n      if (progress.current > 1) {\r\n        setStage(3);\r\n      }\r\n      return;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Connections particles={particles} range={range} />\r\n      {showText && (\r\n        <Text\r\n          fontSize={20}\r\n          position={[0, 100, 0]}\r\n          color=\"#5A1525\"\r\n          anchorX=\"center\"\r\n          anchorY=\"middle\"\r\n        >\r\n          David Beale\r\n        </Text>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import \"./ScrollDown.css\";\r\n\r\nexport default function ScrollDown() {\r\n  return (\r\n    <div className=\"scroll-down\">\r\n      <div className=\"chevron\"></div>\r\n      <div className=\"chevron\"></div>\r\n      <div className=\"chevron\"></div>\r\n      <span className=\"text\">Scroll down</span>\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\";\r\n// eslint-disable-next-line\r\nimport { ReactThreeFiber, useFrame } from \"@react-three/fiber\";\r\nimport {\r\n  Vector3,\r\n  Spherical,\r\n  Color,\r\n  AdditiveBlending,\r\n  ShaderMaterial,\r\n} from \"three\";\r\n\r\nclass StarfieldMaterial extends ShaderMaterial {\r\n  constructor() {\r\n    super({\r\n      uniforms: { time: { value: 0.0 }, fade: { value: 1.0 } },\r\n      vertexShader: /* glsl */ `\r\n      uniform float time;\r\n      attribute float size;\r\n      varying vec3 vColor;\r\n      void main() {\r\n        vColor = color;\r\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\r\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\r\n        gl_Position = projectionMatrix * mvPosition;\r\n      }`,\r\n      fragmentShader: /* glsl */ `\r\n      uniform sampler2D pointTexture;\r\n      uniform float fade;\r\n      varying vec3 vColor;\r\n      void main() {\r\n        float opacity = 1.0;\r\n        if (fade == 1.0) {\r\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\r\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\r\n        }\r\n        gl_FragColor = vec4(vColor, opacity);\r\n      }`,\r\n    });\r\n  }\r\n}\r\n\r\nconst genStar = (r) => {\r\n  return new Vector3().setFromSpherical(\r\n    new Spherical(\r\n      r,\r\n      Math.acos(1 - Math.random() * 2),\r\n      Math.PI / 2 + Math.random() * Math.PI\r\n    )\r\n  );\r\n};\r\n\r\nexport const Stars = React.forwardRef(\r\n  (\r\n    {\r\n      radius = 100,\r\n      depth = 50,\r\n      count = 5000,\r\n      saturation = 0,\r\n      factor = 4,\r\n      fade = false,\r\n    },\r\n    ref\r\n  ) => {\r\n    const material = React.useRef();\r\n    const [position, color, size] = React.useMemo(() => {\r\n      const positions = [];\r\n      const colors = [];\r\n      const sizes = Array.from(\r\n        { length: count },\r\n        () => (0.5 + 0.5 * Math.random()) * factor\r\n      );\r\n      const color = new Color();\r\n      let r = radius + depth;\r\n      const increment = depth / count;\r\n      for (let i = 0; i < count; i++) {\r\n        r -= increment * Math.random();\r\n        positions.push(...genStar(r).toArray());\r\n        color.setHSL(i / count, saturation, 0.9);\r\n        colors.push(color.r, color.g, color.b);\r\n      }\r\n      return [\r\n        new Float32Array(positions),\r\n        new Float32Array(colors),\r\n        new Float32Array(sizes),\r\n      ];\r\n    }, [count, depth, factor, radius, saturation]);\r\n    useFrame(\r\n      (state) =>\r\n        material.current &&\r\n        (material.current.uniforms.time.value = state.clock.getElapsedTime())\r\n    );\r\n\r\n    const [starfieldMaterial] = React.useState(() => new StarfieldMaterial());\r\n\r\n    return (\r\n      <points ref={ref} renderOrder={1}>\r\n        <bufferGeometry attach=\"geometry\">\r\n          <bufferAttribute\r\n            attachObject={[\"attributes\", \"position\"]}\r\n            args={[position, 3]}\r\n          />\r\n          <bufferAttribute\r\n            attachObject={[\"attributes\", \"color\"]}\r\n            args={[color, 3]}\r\n          />\r\n          <bufferAttribute\r\n            attachObject={[\"attributes\", \"size\"]}\r\n            args={[size, 1]}\r\n          />\r\n        </bufferGeometry>\r\n        <primitive\r\n          dispose={undefined}\r\n          ref={material}\r\n          object={starfieldMaterial}\r\n          attach=\"material\"\r\n          blending={AdditiveBlending}\r\n          uniforms-fade-value={fade}\r\n          vertexColors\r\n        />\r\n      </points>\r\n    );\r\n  }\r\n);\r\n","import { Stars } from \"./Stars\";\r\n\r\nexport default function Sky() {\r\n  return (\r\n    <Stars\r\n      renderOrder={1}\r\n      count={3000}\r\n      radius={4500}\r\n      factor={200}\r\n      fade\r\n      saturation={1}\r\n    />\r\n  );\r\n}\r\n","import { useEffect, useMemo, useRef } from \"react\";\r\n\r\nexport default function Ring({ dimensions }) {\r\n  const ref = useRef();\r\n\r\n  const [positions, normals] = useMemo(() => {\r\n    const { w2, h2, depth } = dimensions;\r\n    const thickness = 1;\r\n    const vertices = [\r\n      { pos: [-w2 - thickness, h2 + thickness, depth], norm: [0, 0, 1] },\r\n      { pos: [w2 + thickness, h2 + thickness, depth], norm: [0, 0, 1] },\r\n      { pos: [-w2, h2, depth], norm: [0, 0, 1] },\r\n      { pos: [w2, h2, depth], norm: [0, 0, 1] },\r\n\r\n      { pos: [-w2, -h2, depth], norm: [0, 0, 1] },\r\n      { pos: [w2, -h2, depth], norm: [0, 0, 1] },\r\n      { pos: [-w2 - thickness, -h2 - thickness, depth], norm: [0, 0, 1] },\r\n      { pos: [w2 + thickness, -h2 - thickness, depth], norm: [0, 0, 1] },\r\n    ];\r\n    const numVertices = vertices.length;\r\n    const positions = new Float32Array(numVertices * 3);\r\n    const normals = new Float32Array(numVertices * 3);\r\n    let posNdx = 0;\r\n    let nrmNdx = 0;\r\n    for (const vertex of vertices) {\r\n      positions.set(vertex.pos, posNdx);\r\n      normals.set(vertex.norm, nrmNdx);\r\n      posNdx += 3;\r\n      nrmNdx += 3;\r\n    }\r\n    return [positions, normals];\r\n  }, [dimensions]);\r\n\r\n  useEffect(() => {\r\n    const index = [\r\n      1, 3, 2, 7, 5, 6, 6, 5, 4, 6, 2, 0, 2, 6, 4, 3, 1, 2, 0, 2, 1, 1, 3, 7, 3,\r\n      5, 7,\r\n    ];\r\n    ref.current.setIndex(index);\r\n  }, []);\r\n\r\n  return (\r\n    <mesh scale={[1.01, 1.01, 1.01]}>\r\n      <bufferGeometry ref={ref}>\r\n        <bufferAttribute\r\n          attachObject={[\"attributes\", \"position\"]}\r\n          args={[positions, 3]}\r\n        />\r\n        <bufferAttribute\r\n          attachObject={[\"attributes\", \"normal\"]}\r\n          args={[normals, 3]}\r\n        />\r\n      </bufferGeometry>\r\n\r\n      <meshBasicMaterial color={\"white\"} transparent={true} />\r\n    </mesh>\r\n  );\r\n}\r\n","import { useEffect, useMemo, useRef } from \"react\";\r\n\r\nexport default function MagicBox({ dimensions, debug }) {\r\n  const ref = useRef();\r\n\r\n  const [positions, normals] = useMemo(() => {\r\n    const { w1, w2, h2, depth, backXOffset, h1 } = dimensions;\r\n    const vertices = [\r\n      // right\r\n      { pos: [w2, -h2, depth], norm: [1, 0, 0] },\r\n      { pos: [w1 + backXOffset, -h1, -depth], norm: [1, 0, 0] },\r\n      { pos: [w2, h2, depth], norm: [1, 0, 0] },\r\n      { pos: [w1 + backXOffset, h1, -depth], norm: [1, 0, 0] },\r\n      // back\r\n      { pos: [w1 + backXOffset, -h1, -depth], norm: [0, 0, -1] },\r\n      { pos: [-w1 + backXOffset, -h1, -depth], norm: [0, 0, -1] },\r\n      { pos: [w1 + backXOffset, h1, -depth], norm: [0, 0, -1] },\r\n      { pos: [-w1 + backXOffset, h1, -depth], norm: [0, 0, -1] },\r\n      // left\r\n      { pos: [-w1 + backXOffset, -h1, -depth], norm: [-1, 0, 0] },\r\n      { pos: [-w2, -h2, depth], norm: [-1, 0, 0] },\r\n      { pos: [-w1 + backXOffset, h1, -depth], norm: [-1, 0, 0] },\r\n      { pos: [-w2, h2, depth], norm: [-1, 0, 0] },\r\n      // top\r\n      { pos: [w1 + backXOffset, h1, -depth], norm: [0, 1, 0] },\r\n      { pos: [-w1 + backXOffset, h1, -depth], norm: [0, 1, 0] },\r\n      { pos: [w2, h2, depth], norm: [0, 1, 0] },\r\n      { pos: [-w2, h2, depth], norm: [0, 1, 0] },\r\n      // bottom\r\n      { pos: [w2, -h2, depth], norm: [0, -1, 0] },\r\n      { pos: [-w2, -h2, depth], norm: [0, -1, 0] },\r\n      { pos: [w1 + backXOffset, -h1, -depth], norm: [0, -1, 0] },\r\n      { pos: [-w1 + backXOffset, -h1, -depth], norm: [0, -1, 0] },\r\n    ];\r\n    const numVertices = vertices.length;\r\n    const positions = new Float32Array(numVertices * 3);\r\n    const normals = new Float32Array(numVertices * 3);\r\n    let posNdx = 0;\r\n    let nrmNdx = 0;\r\n    for (const vertex of vertices) {\r\n      positions.set(vertex.pos, posNdx);\r\n      normals.set(vertex.norm, nrmNdx);\r\n      posNdx += 3;\r\n      nrmNdx += 3;\r\n    }\r\n    return [positions, normals];\r\n  }, [dimensions]);\r\n\r\n  useEffect(() => {\r\n    const index = [\r\n      0, 1, 2, 2, 1, 3, 4, 5, 6, 6, 5, 7, 8, 9, 10, 10, 9, 11, 12, 13, 14, 14,\r\n      13, 15, 16, 17, 18, 18, 17, 19,\r\n    ];\r\n    ref.current.setIndex(index);\r\n  }, []);\r\n  return (\r\n    <mesh position={[0, 0, 0]} renderOrder={3} scale={[1.01, 1.01, 1.01]}>\r\n      <bufferGeometry ref={ref}>\r\n        <bufferAttribute\r\n          attachObject={[\"attributes\", \"position\"]}\r\n          args={[positions, 3]}\r\n        />\r\n        <bufferAttribute\r\n          attachObject={[\"attributes\", \"normal\"]}\r\n          args={[normals, 3]}\r\n        />\r\n      </bufferGeometry>\r\n      <meshBasicMaterial\r\n        colorWrite={debug ? true : false}\r\n        transparent={true}\r\n        color={debug ? \"pink\" : \"\"}\r\n      />\r\n    </mesh>\r\n  );\r\n}\r\n","export default function Image({ image, dimensions }) {\r\n  return (\r\n    <mesh\r\n      renderOrder={5}\r\n      position={[dimensions.backXOffset, 0, -dimensions.depth]}\r\n    >\r\n      <planeBufferGeometry args={[dimensions.w1 * 2, dimensions.h1 * 2]} />\r\n      <meshBasicMaterial transparent={true} map={image.image} />\r\n    </mesh>\r\n  );\r\n}\r\n","export default function Link({\r\n  dimensions,\r\n  setHovered,\r\n  image,\r\n  swipingInProgress,\r\n}) {\r\n  const onClick = () => {\r\n    if (swipingInProgress.current) return;\r\n    window.open(image.url, \"_blank\");\r\n  };\r\n  return (\r\n    <mesh\r\n      position={[0, 0, dimensions.depth]}\r\n      onPointerOver={() => setHovered(true)}\r\n      onPointerOut={() => setHovered(false)}\r\n      onPointerUp={onClick}\r\n      renderOrder={6}\r\n    >\r\n      <planeBufferGeometry\r\n        args={[dimensions.w2 * 2.02, dimensions.h2 * 2.02]}\r\n      />\r\n      <meshBasicMaterial transparent={true} opacity={0} />\r\n    </mesh>\r\n  );\r\n}\r\n","import { Text } from \"@react-three/drei\";\r\n\r\nexport default function TextComponent({ dimensions, image }) {\r\n  return (\r\n    <Text\r\n      position={[0, -dimensions.h2 + 20, dimensions.depth + 10]}\r\n      fontSize={25}\r\n      color=\"white\"\r\n      outlineColor=\"#010122\"\r\n      outlineWidth={1}\r\n      outlineBlur={5}\r\n      anchorX=\"center\"\r\n      anchorY=\"middle\"\r\n    >\r\n      {image.text}\r\n    </Text>\r\n  );\r\n}\r\n","export default function GithubLogo({ dimensions, github }) {\r\n  const onClick = (e) => {\r\n    e.stopPropagation();\r\n    window.open(github.url, \"_blank\");\r\n  };\r\n\r\n  return (\r\n    <mesh\r\n      onPointerDown={onClick}\r\n      position={[dimensions.w2 - 18, dimensions.h2 - 18, dimensions.depth + 1]}\r\n    >\r\n      <circleBufferGeometry args={[16, 16]} />\r\n      <meshBasicMaterial map={github.logo} />\r\n    </mesh>\r\n  );\r\n}\r\n","import Ring from \"./Ring\";\r\nimport MagicBox from \"./MagicBox\";\r\nimport Image from \"./Image\";\r\nimport Link from \"./Link\";\r\nimport Text from \"./Text\";\r\nimport GithubLogo from \"./GithubLogo\";\r\n\r\nexport default function Portal({\r\n  dimensions,\r\n  image,\r\n  setHovered,\r\n  github,\r\n  debug,\r\n  swipingInProgress,\r\n}) {\r\n  return (\r\n    <group\r\n      position={[dimensions.xOffset, dimensions.yOffset, dimensions.zOffset]}\r\n    >\r\n      <Image image={image} dimensions={dimensions} />\r\n      <MagicBox dimensions={dimensions} debug={debug} />\r\n      <Ring dimensions={dimensions} />\r\n      <GithubLogo dimensions={dimensions} github={github} />\r\n      <Link\r\n        dimensions={dimensions}\r\n        setHovered={setHovered}\r\n        image={image}\r\n        swipingInProgress={swipingInProgress}\r\n      />\r\n      <Text dimensions={dimensions} image={image} />\r\n    </group>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/car2d.7d6cf49a.png\";","export default __webpack_public_path__ + \"static/media/newtonsCradle.236cded1.png\";","export default __webpack_public_path__ + \"static/media/newsFeeds.be2e3462.JPG\";","export default __webpack_public_path__ + \"static/media/morphing.7ebed05f.png\";","export default __webpack_public_path__ + \"static/media/weather.b7084ab2.JPG\";","export default __webpack_public_path__ + \"static/media/tesseract.2025e3e5.png\";","export default __webpack_public_path__ + \"static/media/sorting.66dc86ee.jpg\";","export default __webpack_public_path__ + \"static/media/attractors.4ee212a3.JPG\";","export default __webpack_public_path__ + \"static/media/fractal.1ab37ca7.JPG\";","export default __webpack_public_path__ + \"static/media/Diffusion.27fe2470.JPG\";","import { useMemo } from \"react\";\r\nimport { isBrowser } from \"react-device-detect\";\r\nimport { TextureLoader } from \"three\";\r\nimport car2d from \"./car2d.png\";\r\nimport newtonsCradle from \"./newtonsCradle.png\";\r\nimport newsFeeds from \"./newsFeeds.JPG\";\r\nimport githubLogo from \"./githubLogo.png\";\r\nimport morphing from \"./morphing.png\";\r\nimport weather from \"./weather.JPG\";\r\nimport tesseract from \"./tesseract.png\";\r\nimport sorting from \"./sorting.jpg\";\r\nimport attractors from \"./attractors.JPG\";\r\nimport fractal from \"./fractal.JPG\";\r\nimport Diffusion from \"./Diffusion.JPG\";\r\n\r\nconst loader = new TextureLoader();\r\nconst textureFiles = {\r\n  githubLogo,\r\n  newtonsCradle,\r\n  car2d,\r\n  newsFeeds,\r\n  morphing,\r\n  weather,\r\n  attractors,\r\n  sorting,\r\n  fractal,\r\n  tesseract,\r\n  Diffusion,\r\n};\r\nconst textures = [];\r\nfor (const key in textureFiles) {\r\n  loader.load(textureFiles[key], (texture) => (textures[key] = texture));\r\n}\r\nexport const useContentData = () => {\r\n  return useMemo(() => {\r\n    return [\r\n      {\r\n        dimensions: {\r\n          xOffset: isBrowser ? -200 : 0,\r\n          yOffset: isBrowser ? 0 : 0,\r\n          zOffset: isBrowser ? -100 : -100,\r\n          backXOffset: isBrowser ? -40 : 0,\r\n          depth: isBrowser ? 75 : 75,\r\n          w1: isBrowser ? 210 : 210,\r\n          h1: isBrowser ? 200 : 200,\r\n          w2: isBrowser ? 126 : 125,\r\n          h2: isBrowser ? 140 : 140,\r\n        },\r\n        image: {\r\n          image: textures.newtonsCradle,\r\n          url: \"https://david-beale.github.io/Newtons-Cradle/\",\r\n          text: \"Newton's Cradle\",\r\n        },\r\n        github: {\r\n          logo: textures.githubLogo,\r\n          url: \"https://github.com/David-Beale/Newtons-Cradle\",\r\n        },\r\n      },\r\n      {\r\n        dimensions: {\r\n          xOffset: isBrowser ? 260 : 0,\r\n          yOffset: isBrowser ? -200 : -400,\r\n          zOffset: isBrowser ? -400 : -100,\r\n          backXOffset: isBrowser ? 50 : 0,\r\n          depth: isBrowser ? 100 : 75,\r\n          w1: isBrowser ? 295 : 210,\r\n          h1: isBrowser ? 280 : 200,\r\n          w2: isBrowser ? 200 : 125,\r\n          h2: isBrowser ? 180 : 140,\r\n        },\r\n        image: {\r\n          image: textures.car2d,\r\n          url: \"https://david-beale.github.io/self-driving-car/\",\r\n          text: \"Self Driving Car\",\r\n        },\r\n        github: {\r\n          logo: textures.githubLogo,\r\n          url: \"https://github.com/David-Beale/self-driving-car\",\r\n        },\r\n      },\r\n      {\r\n        dimensions: {\r\n          xOffset: isBrowser ? -200 : 0,\r\n          yOffset: isBrowser ? -350 : -800,\r\n          zOffset: isBrowser ? -200 : -100,\r\n          backXOffset: isBrowser ? -40 : 0,\r\n          depth: isBrowser ? 75 : 75,\r\n          w1: isBrowser ? 260 : 330,\r\n          h1: isBrowser ? 200 : 200,\r\n          w2: isBrowser ? 126 : 125,\r\n          h2: isBrowser ? 110 : 140,\r\n        },\r\n        image: {\r\n          image: textures.newsFeeds,\r\n          url: \"https://david-beale.github.io/News-feeds/\",\r\n          text: \"News Feeds\",\r\n        },\r\n        github: {\r\n          logo: textures.githubLogo,\r\n          url: \"https://github.com/David-Beale/News-feeds\",\r\n        },\r\n      },\r\n      {\r\n        dimensions: {\r\n          xOffset: isBrowser ? 260 : 0,\r\n          yOffset: isBrowser ? -650 : -1200,\r\n          zOffset: isBrowser ? -250 : -100,\r\n          backXOffset: isBrowser ? 40 : 0,\r\n          depth: isBrowser ? 75 : 75,\r\n          w1: isBrowser ? 215 : 210,\r\n          h1: isBrowser ? 230 : 200,\r\n          w2: isBrowser ? 140 : 125,\r\n          h2: isBrowser ? 145 : 140,\r\n        },\r\n        image: {\r\n          image: textures.morphing,\r\n          url: \"https://david-beale.github.io/morphing/\",\r\n          text: \"Particle morph\",\r\n        },\r\n        github: {\r\n          logo: textures.githubLogo,\r\n          url: \"https://github.com/David-Beale/morphing\",\r\n        },\r\n      },\r\n      {\r\n        dimensions: {\r\n          xOffset: isBrowser ? -230 : 0,\r\n          yOffset: isBrowser ? -700 : -1600,\r\n          zOffset: isBrowser ? -125 : -100,\r\n          backXOffset: isBrowser ? -40 : 0,\r\n          depth: isBrowser ? 75 : 75,\r\n          w1: isBrowser ? 225 : 210,\r\n          h1: isBrowser ? 200 : 200,\r\n          w2: isBrowser ? 140 : 125,\r\n          h2: isBrowser ? 115 : 140,\r\n        },\r\n        image: {\r\n          image: textures.weather,\r\n          url: \"https://david-beale.github.io/weather/\",\r\n          text: \"Weather at a glance\",\r\n        },\r\n        github: {\r\n          logo: textures.githubLogo,\r\n          url: \"https://github.com/David-Beale/weather\",\r\n        },\r\n      },\r\n      {\r\n        dimensions: {\r\n          xOffset: isBrowser ? 210 : 0,\r\n          yOffset: isBrowser ? -1045 : -2000,\r\n          zOffset: isBrowser ? -105 : -100,\r\n          backXOffset: isBrowser ? 55 : 0,\r\n          depth: isBrowser ? 100 : 75,\r\n          w1: isBrowser ? 230 : 210,\r\n          h1: isBrowser ? 230 : 200,\r\n          w2: isBrowser ? 110 : 125,\r\n          h2: isBrowser ? 110 : 140,\r\n        },\r\n        image: {\r\n          image: textures.attractors,\r\n          url: \"https://david-beale.github.io/Attractors/\",\r\n          text: \"Attractors\",\r\n        },\r\n        github: {\r\n          logo: textures.githubLogo,\r\n          url: \"https://github.com/David-Beale/Attractors\",\r\n        },\r\n      },\r\n      {\r\n        dimensions: {\r\n          xOffset: isBrowser ? -200 : 0,\r\n          yOffset: isBrowser ? -1120 : -2400,\r\n          zOffset: isBrowser ? -175 : -100,\r\n          backXOffset: isBrowser ? -50 : 0,\r\n          depth: isBrowser ? 100 : 75,\r\n          w1: isBrowser ? 245 : 250,\r\n          h1: isBrowser ? 230 : 200,\r\n          w2: isBrowser ? 130 : 125,\r\n          h2: isBrowser ? 110 : 140,\r\n        },\r\n        image: {\r\n          image: textures.sorting,\r\n          url: \"https://david-beale.github.io/Sorting/\",\r\n          text: \"Sorting Visualised\",\r\n        },\r\n        github: {\r\n          logo: textures.githubLogo,\r\n          url: \"https://github.com/David-Beale/Sorting\",\r\n        },\r\n      },\r\n      {\r\n        dimensions: {\r\n          xOffset: isBrowser ? 250 : 0,\r\n          yOffset: isBrowser ? -1430 : -2800,\r\n          zOffset: isBrowser ? -210 : -100,\r\n          backXOffset: isBrowser ? 55 : 0,\r\n          depth: isBrowser ? 100 : 75,\r\n          w1: isBrowser ? 245 : 230,\r\n          h1: isBrowser ? 210 : 200,\r\n          w2: isBrowser ? 140 : 125,\r\n          h2: isBrowser ? 105 : 140,\r\n        },\r\n        image: {\r\n          image: textures.fractal,\r\n          url: \"https://david-beale.github.io/fractals/\",\r\n          text: \"Fractals\",\r\n        },\r\n        github: {\r\n          logo: textures.githubLogo,\r\n          url: \"https://github.com/David-Beale/fractals\",\r\n        },\r\n      },\r\n      {\r\n        dimensions: {\r\n          xOffset: isBrowser ? -260 : 0,\r\n          yOffset: isBrowser ? -1530 : -3200,\r\n          zOffset: isBrowser ? -310 : -100,\r\n          backXOffset: isBrowser ? -55 : 0,\r\n          depth: isBrowser ? 100 : 75,\r\n          w1: isBrowser ? 245 : 230,\r\n          h1: isBrowser ? 230 : 200,\r\n          w2: isBrowser ? 130 : 125,\r\n          h2: isBrowser ? 130 : 140,\r\n        },\r\n        image: {\r\n          image: textures.tesseract,\r\n          url: \"https://david-beale.github.io/Tesseract/\",\r\n          text: \"Tesseract\",\r\n        },\r\n        github: {\r\n          logo: textures.githubLogo,\r\n          url: \"https://github.com/David-Beale/Tesseract\",\r\n        },\r\n      },\r\n      {\r\n        dimensions: {\r\n          xOffset: isBrowser ? 220 : 0,\r\n          yOffset: isBrowser ? -1850 : -3600,\r\n          zOffset: isBrowser ? -130 : -100,\r\n          backXOffset: isBrowser ? 60 : 0,\r\n          depth: isBrowser ? 100 : 75,\r\n          w1: isBrowser ? 230 : 210,\r\n          h1: isBrowser ? 230 : 200,\r\n          w2: isBrowser ? 120 : 125,\r\n          h2: isBrowser ? 120 : 140,\r\n        },\r\n        image: {\r\n          image: textures.Diffusion,\r\n          url: \"https://david-beale.github.io/Diffusion/\",\r\n          text: \"Diffusion\",\r\n        },\r\n        github: {\r\n          logo: textures.githubLogo,\r\n          url: \"https://github.com/David-Beale/Diffusion\",\r\n        },\r\n      },\r\n    ];\r\n  }, []);\r\n};\r\n","export default \"data:image/png;base64,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\"","import Portal from \"./Portal/Portal\";\r\nimport { useFrame } from \"@react-three/fiber\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useContentData } from \"./Portal/data/useContentData\";\r\n\r\nexport default function Content({ scroll, stage, debug, swipingInProgress }) {\r\n  const ref = useRef();\r\n  const [hovered, setHovered] = useState(false);\r\n  const contentData = useContentData();\r\n\r\n  useFrame(() => {\r\n    if (!ref.current) return;\r\n    const diff = scroll.current - ref.current.position.y;\r\n    ref.current.position.y += diff * 0.05;\r\n  });\r\n\r\n  useEffect(() => {\r\n    document.body.style.cursor = hovered ? \"pointer\" : \"auto\";\r\n  }, [hovered]);\r\n\r\n  return (\r\n    <>\r\n      {(debug || stage > 2) && (\r\n        <group ref={ref} position={[0, -500, 0]}>\r\n          {contentData.map((data, index) => (\r\n            <Portal\r\n              key={index}\r\n              dimensions={data.dimensions}\r\n              image={data.image}\r\n              github={data.github}\r\n              setHovered={setHovered}\r\n              debug={debug}\r\n              swipingInProgress={swipingInProgress}\r\n            />\r\n          ))}\r\n        </group>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  AdditiveBlending,\r\n  Color,\r\n  LinearFilter,\r\n  MeshBasicMaterial,\r\n  RGBAFormat,\r\n  ShaderMaterial,\r\n  UniformsUtils,\r\n  Vector2,\r\n  Vector3,\r\n  WebGLRenderTarget,\r\n} from \"three\";\r\nimport {\r\n  Pass,\r\n  FullScreenQuad,\r\n} from \"three/examples/jsm/postprocessing/Pass.js\";\r\nimport { CopyShader } from \"three/examples/jsm/shaders/CopyShader.js\";\r\nimport { LuminosityHighPassShader } from \"three/examples/jsm/shaders/LuminosityHighPassShader.js\";\r\n\r\n/**\r\n * UnrealBloomPass is inspired by the bloom pass of Unreal Engine. It creates a\r\n * mip map chain of bloom textures and blurs them with different radii. Because\r\n * of the weighted combination of mips, and because larger blurs are done on\r\n * higher mips, this effect provides good quality and performance.\r\n *\r\n * Reference:\r\n * - https://docs.unrealengine.com/latest/INT/Engine/Rendering/PostProcessEffects/Bloom/\r\n */\r\nclass UnrealBloomPass extends Pass {\r\n  constructor(resolution, strength, radius, threshold) {\r\n    super();\r\n\r\n    this.strength = strength !== undefined ? strength : 1;\r\n    this.radius = radius;\r\n    this.threshold = threshold;\r\n    this.resolution =\r\n      resolution !== undefined\r\n        ? new Vector2(resolution.x, resolution.y)\r\n        : new Vector2(256, 256);\r\n\r\n    // create color only once here, reuse it later inside the render function\r\n    this.clearColor = new Color(0, 0, 0);\r\n\r\n    // render targets\r\n    const pars = {\r\n      minFilter: LinearFilter,\r\n      magFilter: LinearFilter,\r\n      format: RGBAFormat,\r\n    };\r\n    this.renderTargetsHorizontal = [];\r\n    this.renderTargetsVertical = [];\r\n    this.nMips = 5;\r\n    let resx = Math.round(this.resolution.x / 2);\r\n    let resy = Math.round(this.resolution.y / 2);\r\n\r\n    this.renderTargetBright = new WebGLRenderTarget(resx, resy, pars);\r\n    this.renderTargetBright.texture.name = \"UnrealBloomPass.bright\";\r\n    this.renderTargetBright.texture.generateMipmaps = false;\r\n\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      const renderTargetHorizonal = new WebGLRenderTarget(resx, resy, pars);\r\n\r\n      renderTargetHorizonal.texture.name = \"UnrealBloomPass.h\" + i;\r\n      renderTargetHorizonal.texture.generateMipmaps = false;\r\n\r\n      this.renderTargetsHorizontal.push(renderTargetHorizonal);\r\n\r\n      const renderTargetVertical = new WebGLRenderTarget(resx, resy, pars);\r\n\r\n      renderTargetVertical.texture.name = \"UnrealBloomPass.v\" + i;\r\n      renderTargetVertical.texture.generateMipmaps = false;\r\n\r\n      this.renderTargetsVertical.push(renderTargetVertical);\r\n\r\n      resx = Math.round(resx / 2);\r\n\r\n      resy = Math.round(resy / 2);\r\n    }\r\n\r\n    // luminosity high pass material\r\n\r\n    if (LuminosityHighPassShader === undefined)\r\n      console.error(\"THREE.UnrealBloomPass relies on LuminosityHighPassShader\");\r\n\r\n    const highPassShader = LuminosityHighPassShader;\r\n    this.highPassUniforms = UniformsUtils.clone(highPassShader.uniforms);\r\n\r\n    this.highPassUniforms[\"luminosityThreshold\"].value = threshold;\r\n    this.highPassUniforms[\"smoothWidth\"].value = 0.01;\r\n\r\n    this.materialHighPassFilter = new ShaderMaterial({\r\n      uniforms: this.highPassUniforms,\r\n      vertexShader: highPassShader.vertexShader,\r\n      fragmentShader: highPassShader.fragmentShader,\r\n      defines: {},\r\n    });\r\n\r\n    // Gaussian Blur Materials\r\n    this.separableBlurMaterials = [];\r\n    const kernelSizeArray = [3, 5, 7, 9, 11];\r\n    resx = Math.round(this.resolution.x / 2);\r\n    resy = Math.round(this.resolution.y / 2);\r\n\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      this.separableBlurMaterials.push(\r\n        this.getSeperableBlurMaterial(kernelSizeArray[i])\r\n      );\r\n\r\n      this.separableBlurMaterials[i].uniforms[\"texSize\"].value = new Vector2(\r\n        resx,\r\n        resy\r\n      );\r\n\r\n      resx = Math.round(resx / 2);\r\n\r\n      resy = Math.round(resy / 2);\r\n    }\r\n\r\n    // Composite material\r\n    this.compositeMaterial = this.getCompositeMaterial(this.nMips);\r\n    this.compositeMaterial.uniforms[\"blurTexture1\"].value =\r\n      this.renderTargetsVertical[0].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture2\"].value =\r\n      this.renderTargetsVertical[1].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture3\"].value =\r\n      this.renderTargetsVertical[2].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture4\"].value =\r\n      this.renderTargetsVertical[3].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture5\"].value =\r\n      this.renderTargetsVertical[4].texture;\r\n    this.compositeMaterial.uniforms[\"bloomStrength\"].value = strength;\r\n    this.compositeMaterial.uniforms[\"bloomRadius\"].value = 0.1;\r\n    this.compositeMaterial.needsUpdate = true;\r\n\r\n    const bloomFactors = [1.0, 0.8, 0.6, 0.4, 0.2];\r\n    this.compositeMaterial.uniforms[\"bloomFactors\"].value = bloomFactors;\r\n    this.bloomTintColors = [\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1),\r\n    ];\r\n    this.compositeMaterial.uniforms[\"bloomTintColors\"].value =\r\n      this.bloomTintColors;\r\n\r\n    // copy material\r\n    if (CopyShader === undefined) {\r\n      console.error(\"THREE.UnrealBloomPass relies on CopyShader\");\r\n    }\r\n\r\n    const copyShader = CopyShader;\r\n\r\n    this.copyUniforms = UniformsUtils.clone(copyShader.uniforms);\r\n    this.copyUniforms[\"opacity\"].value = 1.0;\r\n\r\n    this.materialCopy = new ShaderMaterial({\r\n      uniforms: this.copyUniforms,\r\n      vertexShader: copyShader.vertexShader,\r\n      fragmentShader: copyShader.fragmentShader,\r\n      blending: AdditiveBlending,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n      transparent: true,\r\n    });\r\n\r\n    this.enabled = true;\r\n    this.needsSwap = false;\r\n\r\n    this._oldClearColor = new Color();\r\n    this.oldClearAlpha = 1;\r\n\r\n    this.basic = new MeshBasicMaterial();\r\n\r\n    this.fsQuad = new FullScreenQuad(null);\r\n  }\r\n\r\n  dispose() {\r\n    for (let i = 0; i < this.renderTargetsHorizontal.length; i++) {\r\n      this.renderTargetsHorizontal[i].dispose();\r\n    }\r\n\r\n    for (let i = 0; i < this.renderTargetsVertical.length; i++) {\r\n      this.renderTargetsVertical[i].dispose();\r\n    }\r\n\r\n    this.renderTargetBright.dispose();\r\n  }\r\n\r\n  setSize(width, height) {\r\n    let resx = Math.round(width / 2);\r\n    let resy = Math.round(height / 2);\r\n\r\n    this.renderTargetBright.setSize(resx, resy);\r\n\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      this.renderTargetsHorizontal[i].setSize(resx, resy);\r\n      this.renderTargetsVertical[i].setSize(resx, resy);\r\n\r\n      this.separableBlurMaterials[i].uniforms[\"texSize\"].value = new Vector2(\r\n        resx,\r\n        resy\r\n      );\r\n\r\n      resx = Math.round(resx / 2);\r\n      resy = Math.round(resy / 2);\r\n    }\r\n  }\r\n\r\n  render(renderer, writeBuffer, readBuffer, deltaTime, maskActive) {\r\n    renderer.getClearColor(this._oldClearColor);\r\n    this.oldClearAlpha = renderer.getClearAlpha();\r\n    const oldAutoClear = renderer.autoClear;\r\n    renderer.autoClear = false;\r\n\r\n    renderer.setClearColor(this.clearColor, 0);\r\n\r\n    if (maskActive) renderer.state.buffers.stencil.setTest(false);\r\n\r\n    // Render input to screen\r\n\r\n    if (this.renderToScreen) {\r\n      this.fsQuad.material = this.basic;\r\n      this.basic.map = readBuffer.texture;\r\n\r\n      renderer.setRenderTarget(null);\r\n      renderer.clear();\r\n      this.fsQuad.render(renderer);\r\n    }\r\n\r\n    // 1. Extract Bright Areas\r\n\r\n    this.highPassUniforms[\"tDiffuse\"].value = readBuffer.texture;\r\n    this.highPassUniforms[\"luminosityThreshold\"].value = this.threshold;\r\n    this.fsQuad.material = this.materialHighPassFilter;\r\n\r\n    renderer.setRenderTarget(this.renderTargetBright);\r\n    renderer.clear();\r\n    this.fsQuad.render(renderer);\r\n\r\n    // 2. Blur All the mips progressively\r\n\r\n    let inputRenderTarget = this.renderTargetBright;\r\n\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      this.fsQuad.material = this.separableBlurMaterials[i];\r\n\r\n      this.separableBlurMaterials[i].uniforms[\"colorTexture\"].value =\r\n        inputRenderTarget.texture;\r\n      this.separableBlurMaterials[i].uniforms[\"direction\"].value =\r\n        UnrealBloomPass.BlurDirectionX;\r\n      renderer.setRenderTarget(this.renderTargetsHorizontal[i]);\r\n      renderer.clear();\r\n      this.fsQuad.render(renderer);\r\n\r\n      this.separableBlurMaterials[i].uniforms[\"colorTexture\"].value =\r\n        this.renderTargetsHorizontal[i].texture;\r\n      this.separableBlurMaterials[i].uniforms[\"direction\"].value =\r\n        UnrealBloomPass.BlurDirectionY;\r\n      renderer.setRenderTarget(this.renderTargetsVertical[i]);\r\n      renderer.clear();\r\n      this.fsQuad.render(renderer);\r\n\r\n      inputRenderTarget = this.renderTargetsVertical[i];\r\n    }\r\n\r\n    // Composite All the mips\r\n\r\n    this.fsQuad.material = this.compositeMaterial;\r\n    this.compositeMaterial.uniforms[\"bloomStrength\"].value = this.strength;\r\n    this.compositeMaterial.uniforms[\"bloomRadius\"].value = this.radius;\r\n    this.compositeMaterial.uniforms[\"bloomTintColors\"].value =\r\n      this.bloomTintColors;\r\n\r\n    renderer.setRenderTarget(this.renderTargetsHorizontal[0]);\r\n    renderer.clear();\r\n    this.fsQuad.render(renderer);\r\n\r\n    // Blend it additively over the input texture\r\n\r\n    this.fsQuad.material = this.materialCopy;\r\n    this.copyUniforms[\"tDiffuse\"].value =\r\n      this.renderTargetsHorizontal[0].texture;\r\n\r\n    if (maskActive) renderer.state.buffers.stencil.setTest(true);\r\n\r\n    if (this.renderToScreen) {\r\n      renderer.setRenderTarget(null);\r\n      this.fsQuad.render(renderer);\r\n    } else {\r\n      renderer.setRenderTarget(readBuffer);\r\n      this.fsQuad.render(renderer);\r\n    }\r\n\r\n    // Restore renderer settings\r\n\r\n    renderer.setClearColor(this._oldClearColor, this.oldClearAlpha);\r\n    renderer.autoClear = oldAutoClear;\r\n  }\r\n\r\n  getSeperableBlurMaterial(kernelRadius) {\r\n    return new ShaderMaterial({\r\n      defines: {\r\n        KERNEL_RADIUS: kernelRadius,\r\n        SIGMA: kernelRadius,\r\n      },\r\n\r\n      uniforms: {\r\n        colorTexture: { value: null },\r\n        texSize: { value: new Vector2(0.5, 0.5) },\r\n        direction: { value: new Vector2(0.5, 0.5) },\r\n      },\r\n\r\n      vertexShader: `varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n\r\n      fragmentShader: `#include <common>\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tuniform sampler2D colorTexture;\r\n\t\t\t\tuniform vec2 texSize;\r\n\t\t\t\tuniform vec2 direction;\r\n\r\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\r\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\r\n\t\t\t\t}\r\n        void main() {\r\n          vec2 invSize = 1.0 / texSize;\r\n          float fSigma = float(SIGMA);\r\n          float weightSum = gaussianPdf(0.0, fSigma);\r\n          float alphaSum = 0.0;\r\n          vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\r\n          for( int i = 1; i < KERNEL_RADIUS; i ++ ) {\r\n            float x = float(i);\r\n            float w = gaussianPdf(x, fSigma);\r\n            vec2 uvOffset = direction * invSize * x;\r\n            vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\r\n            vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\r\n            diffuseSum += (sample1.rgb + sample2.rgb) * w;\r\n            alphaSum += (sample1.a + sample2.a) * w;\r\n            weightSum += 2.0 * w;\r\n          }\r\n          gl_FragColor = vec4(diffuseSum/weightSum, alphaSum/weightSum);\r\n        }`,\r\n    });\r\n  }\r\n\r\n  getCompositeMaterial(nMips) {\r\n    return new ShaderMaterial({\r\n      defines: {\r\n        NUM_MIPS: nMips,\r\n      },\r\n\r\n      uniforms: {\r\n        blurTexture1: { value: null },\r\n        blurTexture2: { value: null },\r\n        blurTexture3: { value: null },\r\n        blurTexture4: { value: null },\r\n        blurTexture5: { value: null },\r\n        dirtTexture: { value: null },\r\n        bloomStrength: { value: 1.0 },\r\n        bloomFactors: { value: null },\r\n        bloomTintColors: { value: null },\r\n        bloomRadius: { value: 0.0 },\r\n      },\r\n\r\n      vertexShader: `varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n\r\n      fragmentShader: `varying vec2 vUv;\r\n\t\t\t\tuniform sampler2D blurTexture1;\r\n\t\t\t\tuniform sampler2D blurTexture2;\r\n\t\t\t\tuniform sampler2D blurTexture3;\r\n\t\t\t\tuniform sampler2D blurTexture4;\r\n\t\t\t\tuniform sampler2D blurTexture5;\r\n\t\t\t\tuniform sampler2D dirtTexture;\r\n\t\t\t\tuniform float bloomStrength;\r\n\t\t\t\tuniform float bloomRadius;\r\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\r\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\r\n\r\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\r\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\r\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\r\n\t\t\t\t}`,\r\n    });\r\n  }\r\n}\r\n\r\nUnrealBloomPass.BlurDirectionX = new Vector2(1.0, 0.0);\r\nUnrealBloomPass.BlurDirectionY = new Vector2(0.0, 1.0);\r\n\r\nexport { UnrealBloomPass };\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport { extend, useThree, useFrame } from \"@react-three/fiber\";\r\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\";\r\nimport { ShaderPass } from \"three/examples/jsm/postprocessing/ShaderPass\";\r\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\r\nimport { UnrealBloomPass } from \"./CustomBloom\";\r\n\r\nextend({ EffectComposer, ShaderPass, RenderPass, UnrealBloomPass });\r\n\r\nexport default function Effects({ children }) {\r\n  const composer = useRef();\r\n  const { gl, size, camera } = useThree();\r\n  const [scene, setScene] = useState();\r\n  useEffect(\r\n    () => void composer.current.setSize(size.width, size.height),\r\n    [size]\r\n  );\r\n  useFrame(() => {\r\n    if (!scene || !composer.current) return;\r\n    composer.current.render();\r\n  }, 1);\r\n\r\n  const bloom = {\r\n    strength: 10,\r\n    radius: 0.1,\r\n    threshold: 0.003,\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <scene ref={setScene}>{children}</scene>\r\n      <effectComposer ref={composer} args={[gl]}>\r\n        <renderPass attachArray=\"passes\" scene={scene} camera={camera} />\r\n        <unrealBloomPass\r\n          attachArray=\"passes\"\r\n          args={[undefined, bloom.strength, bloom.radius, bloom.threshold]}\r\n        />\r\n      </effectComposer>\r\n    </>\r\n  );\r\n}\r\n","import React, { useRef } from \"react\";\r\nimport { useThree, useFrame } from \"@react-three/fiber\";\r\n\r\nexport default function NoEffects({ children }) {\r\n  const scene = useRef();\r\n  const { gl, camera } = useThree();\r\n  useFrame(() => {\r\n    gl.autoClear = false;\r\n    gl.clearDepth();\r\n    gl.render(scene.current, camera);\r\n  }, 2);\r\n\r\n  return <scene ref={scene}>{children}</scene>;\r\n}\r\n","export default __webpack_public_path__ + \"static/media/Smoke-Element.61bf287e.png\";","import { useRef, useMemo } from \"react\";\r\nimport { Vector4, Object3D, AdditiveBlending } from \"three\";\r\nimport { useTexture } from \"@react-three/drei\";\r\nimport { useFrame } from \"@react-three/fiber\";\r\nimport smokeImage from \"./Smoke-Element.png\";\r\n\r\nconst scratchObject3D = new Object3D();\r\n\r\nconst randn_bm = (min, max) => {\r\n  let u = 0,\r\n    v = 0;\r\n  while (u === 0) u = Math.random(); //Converting [0,1) to (0,1)\r\n  while (v === 0) v = Math.random();\r\n  let num = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);\r\n\r\n  num = num / 10.0 + 0.5; // Translate to 0 -> 1\r\n  if (num > 1 || num < 0) num = randn_bm(min, max);\r\n  // resample between 0 and 1 if out of range\r\n  else {\r\n    num *= max - min; // Stretch to fill range\r\n    num += min; // offset to min\r\n  }\r\n  return num;\r\n};\r\n\r\nexport default function Smoke({ stage }) {\r\n  const meshRef = useRef();\r\n  const smokeTexture = useTexture(smokeImage);\r\n\r\n  const particles = useMemo(() => {\r\n    const particles = [];\r\n    for (let i = 0; i < 150; i++) {\r\n      const x = randn_bm(-5000, 5000);\r\n      // let x = Math.random() * 4000 - 2000;\r\n      const newParticle = new Vector4(\r\n        x,\r\n        Math.cos(x / 1250) * (Math.random() * 1200 - 600),\r\n        Math.random() * 500 - 3000,\r\n        Math.random() * 360\r\n      );\r\n      particles.push(newParticle);\r\n    }\r\n    return particles;\r\n  }, []);\r\n\r\n  useFrame(() => {\r\n    if (!meshRef.current) return;\r\n    if (meshRef.current.material.opacity < 0.13) {\r\n      meshRef.current.material.opacity += 0.0001;\r\n    }\r\n    for (let i = 0; i < particles.length; i++) {\r\n      particles[i].w += 0.0015;\r\n      const { x, y, z, w } = particles[i];\r\n      scratchObject3D.position.set(x, y, z);\r\n      scratchObject3D.rotation.set(0, 0, w);\r\n      scratchObject3D.updateMatrix();\r\n      meshRef.current.setMatrixAt(i, scratchObject3D.matrix);\r\n    }\r\n    meshRef.current.instanceMatrix.needsUpdate = true;\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {stage > 2 && (\r\n        <>\r\n          <pointLight\r\n            color={0xd8547e}\r\n            intensity={90}\r\n            distance={2200}\r\n            decay={1}\r\n            position={[-400, -100, -2500]}\r\n          />\r\n          <pointLight\r\n            color={0xcc6600}\r\n            intensity={50}\r\n            distance={2200}\r\n            decay={1}\r\n            position={[0, 0, -2500]}\r\n          />\r\n          <pointLight\r\n            color={0x3677ac}\r\n            intensity={50}\r\n            distance={2200}\r\n            decay={1}\r\n            position={[1200, -100, -2500]}\r\n          />\r\n          <instancedMesh\r\n            ref={meshRef}\r\n            args={[null, null, 150]}\r\n            frustumCulled={false}\r\n            renderOrder={1}\r\n          >\r\n            <planeBufferGeometry args={[900, 900]} />\r\n            <meshStandardMaterial\r\n              color=\"rgb(175, 154, 115)\"\r\n              map={smokeTexture}\r\n              transparent={true}\r\n              opacity={0}\r\n              depthWrite={false}\r\n              blending={AdditiveBlending}\r\n            />\r\n          </instancedMesh>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useFrame, useThree } from \"@react-three/fiber\";\r\n\r\nexport default function Rig({ mouse, mouseRange }) {\r\n  const { camera } = useThree();\r\n  useFrame(() => {\r\n    camera.position.x +=\r\n      (mouse.current[0] / mouseRange.current - camera.position.x) * 0.05;\r\n    camera.position.y +=\r\n      (-mouse.current[1] / mouseRange.current - camera.position.y) * 0.05;\r\n    camera.lookAt(0, 0, 0);\r\n  });\r\n  return null;\r\n}\r\n","import { useCallback, useRef } from \"react\";\r\nimport { isBrowser } from \"react-device-detect\";\r\n\r\nconst clamp = (value, min, max) => {\r\n  if (value < min) return min;\r\n  if (value > max) return max;\r\n  return value;\r\n};\r\n\r\nconst maxY = isBrowser ? 1850 : 3600;\r\nconst minY = 0;\r\n\r\n//\r\n//  MOUSE \r\n//\r\n\r\nexport const useMouseInteraction = (\r\n  progress,\r\n  debug,\r\n  setStage,\r\n  scroll,\r\n  mouse\r\n) => {\r\n  const ignore = useRef(false);\r\n\r\n  const onMouseMove = useCallback(\r\n    (e) => {\r\n      mouse.current = [\r\n        2500 * (e.clientX / window.innerWidth - 0.5),\r\n        1500 * (e.clientY / window.innerHeight - 0.5),\r\n      ];\r\n    },\r\n    [mouse]\r\n  );\r\n\r\n  const onScroll = useCallback(\r\n    (e) => {\r\n      if (progress.current < 1 || ignore.current) return;\r\n\r\n      if (debug) {\r\n        scroll.current = clamp(scroll.current + e.deltaY * 0.8, minY, maxY);\r\n        return;\r\n      }\r\n      setStage((prevStage) => {\r\n        if (prevStage > 2) {\r\n          scroll.current = clamp(scroll.current + e.deltaY * 0.8, minY, maxY);\r\n          return scroll.current >= maxY ? Infinity : 3;\r\n        }\r\n        ignore.current = true;\r\n        setTimeout(() => {\r\n          ignore.current = false;\r\n        }, 50);\r\n        return prevStage + 1;\r\n      });\r\n    },\r\n    [debug, progress, scroll, setStage]\r\n  );\r\n\r\n  const onClick = useCallback(\r\n    (e) => {\r\n      if (progress.current < 1 || ignore.current) return;\r\n\r\n      setStage((prevStage) => {\r\n        if (prevStage <= 2) {\r\n          ignore.current = true;\r\n          setTimeout(() => {\r\n            ignore.current = false;\r\n          }, 50);\r\n          return prevStage + 1;\r\n        }\r\n        return prevStage;\r\n      });\r\n    },\r\n    [setStage, progress]\r\n  );\r\n\r\n  return [onClick, onScroll, onMouseMove];\r\n};\r\n\r\n//\r\n//  TOUCH \r\n//\r\n\r\nexport const useTouchInteraction = (\r\n  progress,\r\n  debug,\r\n  setStage,\r\n  scroll,\r\n  swipingInProgress\r\n) => {\r\n  const ignore = useRef(false);\r\n\r\n  const prevScroll = useRef(0);\r\n  const onSwipeStart = useCallback(() => {\r\n    prevScroll.current = scroll.current;\r\n    swipingInProgress.current = true;\r\n  }, [scroll, swipingInProgress]);\r\n\r\n  const onSwipeStop = useCallback(() => {\r\n    prevScroll.current = scroll.current;\r\n    swipingInProgress.current = false;\r\n  }, [scroll, swipingInProgress]);\r\n\r\n  const onSwiping = useCallback(\r\n    (e) => {\r\n      if (progress.current < 1 || ignore.current) return;\r\n\r\n      if (debug) {\r\n        scroll.current = clamp(prevScroll.current - e.deltaY, minY, maxY);\r\n        return;\r\n      }\r\n      setStage((prevStage) => {\r\n        if (prevStage > 2) {\r\n          scroll.current = clamp(prevScroll.current - e.deltaY, minY, maxY);\r\n          return scroll.current >= maxY ? Infinity : 3;\r\n        }\r\n        ignore.current = true;\r\n        setTimeout(() => {\r\n          ignore.current = false;\r\n        }, 50);\r\n        return prevStage + 1;\r\n      });\r\n    },\r\n    [debug, progress, scroll, setStage]\r\n  );\r\n\r\n  return [onSwipeStart, onSwipeStop, onSwiping];\r\n};\r\n","import { useMouseInteraction } from \"./useInteractions\";\r\n\r\nexport default function Browser({\r\n  children,\r\n  scroll,\r\n  mouse,\r\n  progress,\r\n  debug,\r\n  setStage,\r\n}) {\r\n  const [onClick, onScroll, onMouseMove] = useMouseInteraction(\r\n    progress,\r\n    debug,\r\n    setStage,\r\n    scroll,\r\n    mouse\r\n  );\r\n  return (\r\n    <div\r\n      className=\"container\"\r\n      onPointerUp={onClick}\r\n      onWheel={onScroll}\r\n      onPointerMove={onMouseMove}\r\n    >\r\n      <div className=\"info\">*Chrome recommended*</div>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n","import { useSwipeable } from \"react-swipeable\";\r\nimport { useTouchInteraction } from \"./useInteractions\";\r\n\r\nexport default function Mobile({\r\n  children,\r\n  scroll,\r\n  progress,\r\n  debug,\r\n  setStage,\r\n  swipingInProgress,\r\n}) {\r\n  const [onSwipeStart, onSwipeStop, onSwiping] = useTouchInteraction(\r\n    progress,\r\n    debug,\r\n    setStage,\r\n    scroll,\r\n    swipingInProgress\r\n  );\r\n\r\n  const handlers = useSwipeable({\r\n    onSwipeStart: onSwipeStart,\r\n    onSwiping: onSwiping,\r\n    onSwiped: onSwipeStop,\r\n\r\n    delta: 10, // min distance(px) before a swipe starts. *See Notes*\r\n    preventDefaultTouchmoveEvent: false, // call e.preventDefault *See Details*\r\n    trackTouch: true, // track touch input\r\n    trackMouse: false, // track mouse input\r\n    rotationAngle: 0, // set a rotation angle\r\n  });\r\n\r\n  return (\r\n    <div className=\"container\" {...handlers}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n","import \"./Container.css\";\r\nimport { isBrowser } from \"react-device-detect\";\r\n\r\nimport Browser from \"./Browser\";\r\nimport Mobile from \"./Mobile\";\r\n\r\nexport default function Container({\r\n  children,\r\n  scroll,\r\n  mouse,\r\n  progress,\r\n  debug,\r\n  setStage,\r\n  swipingInProgress,\r\n}) {\r\n  return (\r\n    <>\r\n      {isBrowser ? (\r\n        <Browser\r\n          scroll={scroll}\r\n          mouse={mouse}\r\n          progress={progress}\r\n          debug={debug}\r\n          setStage={setStage}\r\n        >\r\n          {children}\r\n        </Browser>\r\n      ) : (\r\n        <Mobile\r\n          scroll={scroll}\r\n          progress={progress}\r\n          debug={debug}\r\n          setStage={setStage}\r\n          swipingInProgress={swipingInProgress}\r\n        >\r\n          {children}\r\n        </Mobile>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useRef, useState, Suspense } from \"react\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { OrbitControls, Stats, Loader } from \"@react-three/drei\";\n\nimport Particles from \"./Components/Particles/Particles\";\nimport ScrollDown from \"./Components/ScrollDown/ScrollDown\";\nimport Sky from \"./Components/Sky/Sky\";\nimport Content from \"./Components/Content/Content\";\nimport Effects from \"./Components/Effects/Effects\";\nimport NoEffects from \"./Components/NoEffects/NoEffects\";\nimport Smoke from \"./Components/Smoke/Smoke\";\nimport Rig from \"./Rig\";\nimport Container from \"./Components/Container/Container\";\nimport { isBrowser } from \"react-device-detect\";\n\nconst debug = false;\n\nexport default function App() {\n  const progress = useRef(2);\n  const mouse = useRef([0, 0]);\n  const mouseRange = useRef(5);\n  const scroll = useRef(0);\n  const swipingInProgress = useRef(false);\n  const [stage, setStage] = useState(0);\n\n  return (\n    <Container\n      scroll={scroll}\n      mouse={mouse}\n      progress={progress}\n      debug={debug}\n      swipingInProgress={swipingInProgress}\n      setStage={setStage}\n    >\n      <Canvas camera={{ position: [0, 0, 700], fov: 40, far: 10000 }}>\n        <Suspense fallback={null}>\n          <Stats />\n          {!debug && stage <= 2 && (\n            <>\n              <Effects>\n                <Particles\n                  stage={stage}\n                  setStage={setStage}\n                  mouseRange={mouseRange}\n                  progress={progress}\n                />\n              </Effects>\n            </>\n          )}\n          <NoEffects>\n            <Content\n              scroll={scroll}\n              stage={stage}\n              debug={debug}\n              swipingInProgress={swipingInProgress}\n            />\n            <Sky />\n            <Smoke stage={stage} />\n          </NoEffects>\n          {/* <OrbitControls /> */}\n          {isBrowser && <Rig mouse={mouse} mouseRange={mouseRange} />}\n        </Suspense>\n      </Canvas>\n      <Loader />\n      {stage < Infinity && <ScrollDown />}\n    </Container>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}